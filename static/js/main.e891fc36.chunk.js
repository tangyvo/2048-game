(this["webpackJsonp2048-game"]=this["webpackJsonp2048-game"]||[]).push([[0],{14:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(6),o=r.n(c),u=(r(14),r(7)),i=r(2),l=r(1),s=r(8),f=function(e){var t=e.gameover,r=e.score;return a.a.createElement("div",{className:t?"gameover show":"gameover"},a.a.createElement("p",null,r>=2048?"You've won":"No more moves"))},m=function(e){var t=e.score,r=e.bestScore,n=e.init;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",null,a.a.createElement("div",{className:"logo"},a.a.createElement("p",null,"2048")),a.a.createElement("div",{className:"header-info-section"},a.a.createElement("div",{className:"score"},a.a.createElement("p",null,"score"),a.a.createElement("p",null,t)),a.a.createElement("div",{className:"best"},a.a.createElement("p",null,"Best"),a.a.createElement("p",null,r)),a.a.createElement("button",{className:"btn btn-reset",onClick:n},"Reset"))))};function v(){return a.a.createElement("div",{className:"instructions"},a.a.createElement("strong",null,"How to play: "),"Press the \u2191, \u2193, \u2192, \u2190 arrow keys to move the tiles. When 2 same tiles touch they merge into one. Reach 2048 to win.")}var b=function(e){var t=e.grid,r=e.id;return a.a.createElement("main",{className:"grid"},t.join(",").split(",").map((function(e,t){return a.a.createElement("div",{className:"colour-".concat(e," ").concat(t===r?"newBlock":""),key:t},"0"===e?"":e)})))};var d=function(){var e=Object(n.useState)(0),t=Object(l.a)(e,2),r=t[0],c=t[1],o=Object(n.useState)(0),d=Object(l.a)(o,2),h=d[0],O=d[1],j=Object(n.useState)(0),E=Object(l.a)(j,2),p=E[0],g=E[1],w=Object(n.useState)(!1),S=Object(l.a)(w,2),N=S[0],y=S[1],M=Object(n.useState)(!1),k=Object(l.a)(M,2),A=k[0],B=k[1],I=Object(n.useState)(),J=Object(l.a)(I,2),L=J[0],R=J[1],T=Object(n.useState)([0,0]),Y=Object(l.a)(T,2),D=Y[0],U=Y[1],X=Object(n.useState)([0,0]),x=Object(l.a)(X,2),C=x[0],F=x[1],H=Object(n.useState)(!1),P=Object(l.a)(H,2),W=P[0],q=P[1],z=Object(n.useState)([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]),G=Object(l.a)(z,2),K=G[0],Q=G[1];Object(n.useEffect)((function(){var e=localStorage.getItem("2048-best-score")?localStorage.getItem("2048-best-score"):0;c(e),V()}),[]);var V=function(){var e=Math.round(Math.random());g([2,4][e]),B((function(e){return!0!==e}))};Object(n.useEffect)((function(){for(var e=Object(i.a)(K),t=!1;!t;){var r=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());0===e[r][n]&&(e[r][n]=p,Z(r,n),t=!0,$())}Q(e)}),[A]);var Z=function(e,t){R(4*e+t)},$=function(){var e=0;K.map((function(t){return e+=t.reduce((function(e,t){return e+Number(t)}),0)})),O(e)},_=function(e){s.isBrowser&&(e=e.key);var t=JSON.parse(JSON.stringify(Object(i.a)(K)));if("ArrowUp"===e)!function(){for(var e=Object(i.a)(K),t=function(t){var r=[0,1,2,3].map((function(r){return e[r][t]})).filter((function(e){return e>0}));r=te(r);for(var n=0;n<4;n++)e[n][t]=void 0!==r[n]?r[n]:0},r=0;r<4;r++)t(r);Q(e)}();else if("ArrowDown"===e)!function(){for(var e=Object(i.a)(K),t=function(t){var r=[3,2,1,0].map((function(r){return e[r][t]})).filter((function(e){return e>0}));r=te(r);for(var n=0;n<4;n++)e[n][t]=void 0!==r[3-n]?r[3-n]:0},r=0;r<4;r++)t(r);Q(e)}();else if("ArrowLeft"===e)!function(){for(var e=Object(i.a)(K),t=0;t<4;t++){var r=e[t].filter((function(e){return e>0}));r=te(r);for(var n=0;n<4;n++)e[t][n]=void 0!==r[n]?r[n]:0}Q(e)}();else{if("ArrowRight"!==e)return;!function(){for(var e=Object(i.a)(K),t=0;t<4;t++){var r=e[t].filter((function(e){return e>0}));r=te(r).reverse();for(var n=0;n<4;n++)e[t][n]=void 0!==r[3-n]?r[3-n]:0}Q(e)}()}for(var r=!1,n=0;n<4;n++)for(var a=0;a<4;a++)t[n][a]!==K[n][a]&&(r=!0);r&&(V(),$(),ee())},ee=function(){var e,t=0,n=Object(u.a)(K);try{for(n.s();!(e=n.n()).done;){t+=e.value.filter((function(e){return 0!==e})).length}}catch(l){n.e(l)}finally{n.f()}if(16===t){for(var a=!0,o=0;o<=3;o++)for(var i=0;i<=3;i++)3===o?K[o][i]===K[o][i+1]&&(a=!1):3===i?K[o][i]===K[o+1][i]&&(a=!1):K[o][i]!==K[o+1][i]&&K[o][i]!==K[o][i+1]||(a=!1);a&&(y(!0),h>r&&(localStorage.setItem("2048-best-score",h),c(h)))}},te=function(e){for(var t=Object(i.a)(e),r=0;r<e.length-1;r++)t[r]===t[r+1]&&(t[r]=2*e[r],t.splice(r+1,1));return t};Object(n.useEffect)((function(){if(!N)return window.addEventListener("keydown",_),function(){window.removeEventListener("keydown",_)}})),Object(n.useEffect)((function(){if(W){var e=D[0]-C[0],t=D[1]-C[1],r=Math.abs(e),n=Math.abs(t);r>n?_(e>0?"ArrowLeft":"ArrowRight"):r<n&&_(t>0?"ArrowUp":"ArrowDown"),q(!1)}}),[W]);var re=function(e){"touchstart"===e.type?U([e.touches[0].clientX,e.touches[0].clientY]):"touchmove"===e.type?F([e.touches[0].clientX,e.touches[0].clientY]):"touchend"===e.type&&q(!0)};return a.a.createElement("div",{className:"app",onTouchStart:function(e){return re(e)},onTouchMove:function(e){return re(e)},onTouchEnd:function(e){return re(e)}},a.a.createElement(m,{score:h,bestScore:r,init:function(){Q([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]),V(),O(p),y(!1)}}),a.a.createElement(v,null),a.a.createElement(f,{className:"gameover",gameover:N,score:h}),a.a.createElement(b,{grid:K,id:L}))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(d,null)),document.getElementById("root"))},9:function(e,t,r){e.exports=r(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.e891fc36.chunk.js.map